---

---

<center><font face="黑体" size=8>扫雷游戏项目计划书</font></center>

# 一、概述

## 1.1 选题的目的及意义

本次课程设计的主要目的是为了通过具体的程序来加深Java语言的掌握，提高自己的编程水平。选择的题目来自《Java课程设计（第三版）》中的扫雷游戏，这是一个综合性的题目，可以对Java中的各项功能有更好的理解和使用。

## 1.2 程序设计任务与要求

使用Java语言编写一个与其类似的扫雷游戏。具体要求如下：
（1）、扫雷游戏分为初级、中级和高级，扫雷英雄榜存储每一个级别的最好成绩，即挖出全部的地雷且用时最少者。单击游戏菜单可以选择、初级、中级或高级查看英雄榜。
（2）、选择级别后将出现相应级别的扫雷区域，这时用户单击雷区中的任何一个方块便启动计时器。
（3）、用户要揭开某一个方块，可单击它。若所揭开的方块是雷，用户便输了这一局，程序发出爆炸的声音。若所揭开方块不是雷，则显示一个数字，该数字表示和和该方块相邻的方块中是雷的方块总数（相邻方块最多可有8个），同时将周围不是雷的方块揭开。
（4）、如果用户认为某个方块是雷，在方块上右击，可以在方块上标示一个用户认为是雷的图标（再单击一次可取消所做的标记），即给出一个扫雷标记，相当于扫雷期间在怀疑是雷的方块上插个小红旗。用户每标记出一个扫雷标记（无论用户的标记是否正确），程序就把“剩余雷数”减少一个，并显示该剩余雷数。
（5）、扫雷胜利后，如果成绩进入前三名，程序会弹出保存成绩的对话框。

------



# 二、需求分析

## 2.1 扫雷游戏的需求分析

随着社会进步，人们的压力也不断的提高，在游戏层出不穷的时刻，扫雷游戏仍然受到不少人的青睐。不需要特殊技巧、无需太多熟悉，程序小巧，且具有一定锻炼逻辑思维能力的功效。

## 2.2 程序需要实现的主要功能：

(1)	用户可以自定义级别，并确定雷的个数。
(2)	具有计时功能，即显示用户完成扫雷所花费的时间。
(3)	点击开始进行扫雷。
(4)	用户识别雷右击可标记“雷”。

## 2.3 功能模块如下：

#### （1）	游戏界面（图）

![游戏界面](..\static\doc\游戏界面.png)

#### （2）	鼠标事件（图）

![左键单击](..\static\doc\左键单击.png)

#### （3）	地雷判断（图）

![右键单击](..\static\doc\右键单击.png)

#### （4）	游戏胜利（图）

![游戏胜利](..\static\doc\游戏胜利.png)

#### （5）	游戏结束（图）

![游戏失败](..\static\doc\游戏失败.png)

#### （6）	游戏设置（图）

![选择难度](..\static\doc\选择难度.png)

#### （8）	查看英雄榜（图）

![查看英雄榜](..\static\doc\查看英雄榜.png)

------



# 三、总体设计

## 3.1 算法思想



## 3.2 设计思想

### 3.2.1 扫雷棋盘的布局设计

  系统的整体布局为: Cardlavout布局，采用了菜单、按钮、画板等组件。
  菜单主要包括开始，选择级别，标记，按钮的功能是重新开始新的游戏。

### 3.2.2 类的设计

Block类:其实例是雷区中的方块。
Laymines类:其实例负责在雷区布雷
Peoplescoutmine类:其实例负责在雷区扫雷。
Viewforblock接口:规定了为方块制作视图的方法
Recordorshowrecord类:其实例负责读/写英雄榜。

### 3.2.3 数据模型

#### （1）方块

Bock的实例是雷区中的方块，方块可以是雷也可以不是雷。如果方块是雷，该方块的is Mine属性值就是tue，否则是flse。当方块的 imine属性值是 false时，该方块的aroundmine Number属性值是和该方块相邻且是雷的方块数目(一个方块最多可以有8个相邻的方块)。当该方块的 imine属性值是tue时， minelcon属性值是一个 Imagelcon图标的实例(地雷的样子)。

#### （2）布雷

Laymines类的实例负责在雷区布雷，即随机设置某些方块是雷。

#### （3）扫雷

Peoplescoutmine类的实例负责在雷区扫雷。该实例使用方法 Stack＜ Block＞getnominearoundblock( Block bk)寻找不是雷的方块，并将找到的方块压入堆栈，然后返回该堆栈。如果参数bk不是雷，但bk相邻的方块中有方块是雷，那么找到的不是雷的方块就是bk。
如果bk不是雷，但bk相邻的方块中没有任何一个方块是雷，那么就把相邻的方块作为getnominearoundblock(Block bk)方法的参数继续调用该方法，即 Peoplescoutmine类的实例用递归方法寻找一个方块周围区域内不是雷的方块，并将这些方块压入堆栈，返回该堆栈。
该实例使用方法 public boolean verify Wino判断用户是否扫雷成功。如果剩余的、没有揭开的方块数目刚好等于雷区的总雷数，该方法返回tue，否则返回 false。

#### （4）视图接口

方块需要一个外观提供给游戏的玩家，以便玩家单击方块或标记方块进行扫雷Viewforblock接口封装了给出视图的方法，例如 void acceptblock( Block block)方法确定该视图为哪个 Block实例提供视图。实现 Viewfor接口的类将在视图(View)设计部分给出，见稍后的 Blockview类。

#### （5）英雄榜

使用内置 Derby数据库 record存放玩家的成绩(有关内置 Derby数据库的知识点可参见Java2实用教程》第5版的第11章或本书的第3章)。数据库使用表存放成绩，即表示英雄榜。表中的字段 p name的值是玩家的名字，字段 p time是玩家的用时。玩家只要排进前3名就可以进入英雄榜，英雄榜上原有的第3名就退居到第4名(英雄榜记录着曾经的扫雷英雄)。 Recordorshow Record类的实例可以向英雄榜插入记录或查看英雄榜。